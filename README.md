# AstrBot 图像对称处理插件

一个为AstrBot设计的图像对称处理插件，专门生成各种“诡异”而有趣的对称图片，希望能给大家带来一点欢乐！

> **✨ 社区力量更新**：曾经最头疼的“GIF不动”问题，已在社区贡献者 `@superexboom` 的帮助下成功修复！感谢开源协作的力量！

## 🎯 功能特性

*   **四种对称模式**：左对称、右对称、上对称、下对称，制造各种“鬼畜”效果。
*   **多图像源支持**：支持处理静态图片（PNG, JPG, WebP）、**GIF动画**、QQ用户头像。
*   **智能解析**：自动识别回复消息中的图片、同条消息中的图片以及@用户头像。
*   **安全防护**：内置SSRF防护，处理网络图像更安心。
*   **自动清理**：自动清理临时文件，避免占用空间。

## 🚀 快速开始

### 安装方法

1.  **从AstrBot插件市场安装（推荐）**
    *   在AstrBot Web管理界面进入“插件市场”。
    *   搜索“图像对称”或直接输入仓库地址安装。

2.  **手动安装**
    *   从 [GitHub Releases](https://github.com/FenChen0211/astrbot-plugin-pic-mirror/releases) 下载最新的 `zip` 包。
    *   在AstrBot插件管理界面选择“上传插件”，然后选择下载的文件。

### 基础指令

| 指令 | 功能描述 |
| :--- | :--- |
| `左对称` | 左半边图像对称到右边 |
| `右对称` | 右半边图像对称到左边 |
| `上对称` | 上半边图像对称到下面 |
| `下对称` | 下半边图像对称到上面 |
| `对称帮助` | 显示详细使用说明 |

**使用示例**:
- **回复图片**：回复一条含图片的消息，然后发送 `/左对称`。
- **处理头像**：发送 `/右对称 @某人` 来处理该用户的QQ头像。
- **同消息发送**：在同一消息中发送图片和 `/上对称` 指令。

## ⚙️ 配置说明

插件提供丰富的配置选项，可在AstrBot Web界面中调整：

| 配置项 | 类型 | 默认值 | 描述 |
| :--- | :--- | :--- | :--- |
| 图像大小限制 (MB) | 整数 | 10 | 普通图像最大大小 |
| GIF大小限制 (MB) | 整数 | 15 | GIF动画最大大小 |
| 处理超时时间 (秒) | 整数 | 30 | 图像处理超时时间 |
| 输出图像质量 | 整数 | 85 | JPEG图像质量 (1-100) |
| 启用GIF处理 | 布尔 | true | 是否处理GIF动画 |
| 启用自动压缩 | 布尔 | true | 是否自动压缩大图 |
| 静默模式 | 布尔 | true | 是否启用静默模式（不发送处理提示） |
| 启用自动清理 | 布尔 | true | 发送后自动清理生成的文件 |
| 文件保留时间 (小时) | 整数 | 1 | 生成的文件保留时长 |
| 启用@用户头像功能 | 布尔 | true | 是否允许通过@用户获取头像处理 |

## 🤝 贡献与致谢

这个插件最初完全由AI助手生成，并由社区共同完善。我们特别感谢：

*   **贡献者 `@superexboom`**：成功修复了关键的 **GIF动画处理问题** 🎉。
*   **所有测试和反馈的用户**：你们的每一个Issue都让插件变得更好。

**欢迎任何形式的贡献**！无论是修复Bug、优化代码、改进文档，还是提出新想法，我们都非常欢迎。

**贡献流程**：
1.  Fork 本仓库。
2.  创建功能分支 (`git checkout -b feat/awesome-feature`)。
3.  提交更改 (`git commit -m 'feat: add some awesome feature'`)。
4.  推送到分支 (`git push origin feat/awesome-feature`)。
5.  提交 Pull Request。

## 📝 项目状态与说明

### ✅ 已修复的核心问题
*   **GIF动画处理**：已修复对称后动画丢失的问题。
*   **版本更新逻辑**：已修复插件市场版本检测异常的问题。
*   **安全防护**：已实现多层SSRF防护，可安全处理网络图片。

### ⚠️ 已知待完善项
*   **配置系统**：部分用户反馈WebUI中的配置修改可能不生效，正在排查中。
*   **性能与压力测试**：极端高并发场景下的稳定性有待更多验证。

### 🛡️ 安全使用建议
虽然插件已做安全加固，但处理用户提供的网络图片仍存在理论风险。建议在**可信的环境**中使用。对于运行关键服务的服务器，请务必做好网络隔离。

---

> **最后的话**：这原本是一个“AI编写、高中生维护”的练习项目，却因为社区的帮助而变得完整。如果你用它制造出了特别诡异的图片，欢迎分享！**如果喜欢这个插件，别忘了点个 Star ⭐，这是对我们最大的鼓励！**

